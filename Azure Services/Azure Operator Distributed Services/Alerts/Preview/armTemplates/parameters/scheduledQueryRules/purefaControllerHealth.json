{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "alertName": {
      "value": "PureFA Controller Health"
    },
    "alertDescription": {
      "value": "PureFA Controller Health will query the PureFA Hardware compenent health logs and list the Time of the log, the Controller Index and the Controller health. The Health of each controller is given in a binary 1=Health, 0=Unhealthy, as provided by PureFA."
    },
    "alertSeverity": {
      "value": 3
    },
    "query": {
      "value": "InsightsMetrics | where Namespace == 'prometheus' and Name == 'purefa_hardware_controller_health' | extend Json = parse_json(Tags) | extend Controller = tostring(Json.controller) | project TimeGenerated, Computer, Origin, AgentId, Type, _ResourceId, Controller, Val"
    },
    "metricMeasureColumn": {
      "value": "Val"
    },
    "resourceIdColumn": {
      "value": "_ResourceId"
    },
    "operator": {
      "value": "LessThan"
    },
    "threshold": {
      "value": "1"
    },
    "timeAggregation": {
      "value": "Minimum"
    },
    "windowSize": {
      "value": "PT5M"
    },
    "evaluationFrequency": {
      "value": "PT1M"
    },
    "dimensions": {
      "value": []
    }
  }
}
